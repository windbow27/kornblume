import{$ as S,a0 as b,u as O,I as k}from"./index-DMyI51Vm.js";function I(t){return S()?(b(t),!0):!1}function g(t){return typeof t=="function"?t():O(t)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const P=Object.prototype.toString,L=t=>P.call(t)==="[object Object]",h=()=>{},W=_();function _(){var t,r;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((r=window==null?void 0:window.navigator)==null?void 0:r.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function f(t){var r;const i=g(t);return(r=i==null?void 0:i.$el)!=null?r:i}const E=A?window:void 0;function v(...t){let r,i,o,a;if(typeof t[0]=="string"||Array.isArray(t[0])?([i,o,a]=t,r=E):[r,i,o,a]=t,!r)return h;Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]);const d=[],p=()=>{d.forEach(c=>c()),d.length=0},l=(c,u,e,n)=>(c.addEventListener(u,e,n),()=>c.removeEventListener(u,e,n)),m=k(()=>[f(r),g(a)],([c,u])=>{if(p(),!c)return;const e=L(u)?{...u}:u;d.push(...i.flatMap(n=>o.map(s=>l(c,n,s,e))))},{immediate:!0,flush:"post"}),w=()=>{m(),p()};return I(w),w}let y=!1;function C(t,r,i={}){const{window:o=E,ignore:a=[],capture:d=!0,detectIframe:p=!1}=i;if(!o)return;W&&!y&&(y=!0,Array.from(o.document.body.children).forEach(e=>e.addEventListener("click",h)),o.document.documentElement.addEventListener("click",h));let l=!0;const m=e=>a.some(n=>{if(typeof n=="string")return Array.from(o.document.querySelectorAll(n)).some(s=>s===e.target||e.composedPath().includes(s));{const s=f(n);return s&&(e.target===s||e.composedPath().includes(s))}}),c=[v(o,"click",e=>{const n=f(t);if(!(!n||n===e.target||e.composedPath().includes(n))){if(e.detail===0&&(l=!m(e)),!l){l=!0;return}r(e)}},{passive:!0,capture:d}),v(o,"pointerdown",e=>{const n=f(t);l=!m(e)&&!!(n&&!e.composedPath().includes(n))},{passive:!0}),p&&v(o,"blur",e=>{setTimeout(()=>{var n;const s=f(t);((n=o.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(s!=null&&s.contains(o.document.activeElement))&&r(e)},0)})].filter(Boolean);return()=>c.forEach(e=>e())}export{C as o};
