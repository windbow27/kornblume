import{o as ht}from"./index-ViMf8AHI.js";import{J as It,d as q,q as H,o as $,c as I,a as t,z as K,u as E,_ as nt,t as b,i as A,s as O,e as Mt,F as z,r as st,v as Z,G as wt,g as R,w as B,A as T,K as le,j as zt,f as dt,l as G,H as gt,B as F,p as yt,n as bt,y as vt,x as Ct,L as At,E as Vt,D as ie,b as Dt}from"./index-7-2MiKkj.js";import{u as mt,f as re}from"./arcanists-GfWYH_z9.js";import{u as St,m as Bt,f as ce,C as jt,_ as ue,l as de}from"./ArcanistCalculate.vue_vue_type_script_setup_true_name_ArcanistCalculate_lang-zLIgiMT-.js";import{d as he,e as ve}from"./images-8HZoh0al.js";import{f as kt,n as Nt}from"./MaterialIcon.vue_vue_type_script_setup_true_lang-7HMwzx3r.js";import{_ as pe,c as me,a as fe}from"./ArcanistIcon.vue_vue_type_script_setup_true_lang-rN2CkOOa.js";import{_ as ge}from"./0-8S0ubkj6.js";import{_ as ye}from"./ArcanistIconDisplay.vue_vue_type_script_setup_true_lang-xFWfy8Id.js";const Tt=It("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),_t=It("activity",{state:()=>({settings:{roaringMonth:!1,lazyModo:!1,weeklyActivity:!1,refills:0,activity:240,cost:0}}),persist:!0}),Ht=It("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),be=["data-tip"],_e={class:"rounded-md overflow-hidden w-12 h-12"},$e={class:"avatar"},xe=["src","alt"],we=q({__name:"ArcanistIconToggle",props:{arcanist:{type:Number,required:!0},visible:{type:Boolean,required:!0}},setup(e){const s=e,a=H().arcanists.find(n=>n.Id===s.arcanist);return(n,o)=>{var r,c,u,i,h,v,p,g;return $(),I("div",{class:"tooltip","data-tip":n.$t(String((r=E(a))==null?void 0:r.Name))},[t("div",_e,[t("div",$e,[t("div",{class:K(["w-12 rounded",{"filter-grayscale opacity-50":!e.visible,"bg-orange-300":((c=E(a))==null?void 0:c.Rarity)===6,"bg-yellow-100":((u=E(a))==null?void 0:u.Rarity)===5,"bg-purple-400":((i=E(a))==null?void 0:i.Rarity)===4,"bg-sky-200":((h=E(a))==null?void 0:h.Rarity)===3,"bg-green-200":((v=E(a))==null?void 0:v.Rarity)===2}])},[t("img",{src:E(he)(((p=E(a))==null?void 0:p.Id)??10024),alt:(g=E(a))==null?void 0:g.Name},null,8,xe)],2)])])],8,be)}}}),ke=nt(we,[["__scopeId","data-v-4b08754a"]]),Q=It("warehouse",{state:()=>({data:[]}),actions:{initItem(e,s){this.data.push({Material:e,Quantity:0,Category:s})},removeItem(e){this.data=this.data.filter(s=>s.Material!==e)},addItem(e,s){this.data=this.data.map(a=>a.Material===e?{...a,Quantity:a.Quantity+s}:{...a})},reduceItem(e,s){this.data=this.data.map(a=>a.Material===e?{...a,Quantity:a.Quantity>=s?a.Quantity-s:a.Quantity}:{...a})},updateItem(e,s){this.data=this.data.map(a=>a.Material===e?{...a,Quantity:s}:{...a})},hasItem(e){return this.data.some(s=>s.Material===e)},getItemQuantity(e){var s;return((s=this.data.find(a=>a.Material===e))==null?void 0:s.Quantity)||0},resetAll(){this.data=this.data.map(e=>({...e,Quantity:0}))},resetCategory(e){this.data=this.data.map(s=>s.Category===e?{...s,Quantity:0}:{...s})}},persist:!0}),Ie=["data-tip"],Me={class:"relative inline-block"},Ce=["src"],Ae=["src"],Se=q({__name:"ItemGoalIcon",props:{material:{type:Object,required:!0}},setup(e){const s=e,a=()=>s.material.Quantity>99||Q().getItemQuantity(s.material.Material)>99,n=()=>Nt(s.material);return(o,r)=>($(),I("div",{class:"tooltip","data-tip":o.$t(n().material)},[t("div",Me,[t("img",{src:n().borderImagePath,alt:"Border Image",class:K(["w-20 h-20 absolute",{"w-36":a()}])},null,10,Ce),t("img",{src:n().itemImagePath,alt:"Material Image",class:K(["w-20 h-20 avatar",{"mx-5":a()}])},null,10,Ae),t("div",{class:K(["flex items-center justify-center small-text text-white absolute -bottom-3 left-3 input input-xs rounded-t-none",{"left-[17px] w-[85px]":a(),"w-14":!a(),"bg-green-800/80":E(Q)().getItemQuantity(s.material.Material)>=s.material.Quantity,"bg-red-500/60":E(Q)().getItemQuantity(s.material.Material)<s.material.Quantity}])},b(E(kt)(E(Q)().getItemQuantity(n().material)))+" / "+b(n().quantity),3)])],8,Ie))}}),Kt=nt(Se,[["__scopeId","data-v-87bbf507"]]),Ne={class:"p-2"},Oe={class:"flex flex-wrap justify-center space-x-2"},Qe={class:"flex justify-center items-center"},Re={class:"btn btn-ghost custom-gradient-button btn-sm text-white",onclick:"goalMaterials.showModal()"},je={id:"goalMaterials",class:"modal"},Ve={class:"modal-box custom-gradient-gray-blue custom-border hidden-scrollbar"},De=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),Ee={class:"font-bold text-lg text-white text-center"},Ue={class:"hidden-scrollbar pt-9 custom-item-list"},We={method:"dialog",class:"flex justify-center pt-5"},Pe={class:"btn btn-sm btn-success text-black"},qe=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Le={key:0,class:"text-center text-slate-300 text-sm opacity-70"},Fe={key:1,class:"text-center text-slate-300 text-sm opacity-70"},Ge=q({__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(e,{emit:s}){const a=e,n=s,o=A(a.selectedArcanists),r=h=>{n("open-edit-overlay",h)},c=h=>{h.isVisible=!h.isVisible},u=O(()=>{var h;return((h=o.value)==null?void 0:h.length)||0}),i=O(()=>{const h=o.value.map(g=>g.isVisible?St(g):[]),v=Bt(h);return ce(v)});return(h,v)=>{const p=Mt("i18n-t");return $(),I("div",Ne,[t("div",Oe,[($(!0),I(z,null,st(o.value,g=>($(),T(ke,{key:g.Id,arcanist:g.Id,visible:g.isVisible,onClick:m=>r(g),onContextmenu:le(m=>c(g),["prevent"]),class:"mb-2"},null,8,["arcanist","visible","onClick","onContextmenu"]))),128)),Z(t("div",Qe,[t("button",Re,b(h.$t("goal")),1),t("dialog",je,[t("div",Ve,[De,t("h3",Ee,b(h.$t("total-goal-materials")),1),t("div",Ue,[($(!0),I(z,null,st(i.value,g=>($(),T(Kt,{class:"py-2",key:g.Material.toString(),material:g},null,8,["material"]))),128))]),t("form",We,[t("button",Pe,b(h.$t("close")),1)])]),qe])],512),[[wt,u.value>0]])]),u.value>0?($(),I("p",Le,b(h.$t("left-click-to-edit-right-click-to-show-hide")),1)):($(),I("p",Fe,[R(p,{keypath:"click-add-arcanist-button-to-start-planning"},{button:B(()=>[t("span",null,b(h.$t("add-arcanist")),1)]),_:1})]))])}}}),ze={class:"relative w-2/3 md:w-1/3 flex justify-center"},Be={key:0},Te=t("i",{class:"fa-regular fa-circle text-white"},null,-1),He=[Te],Ke={key:1},Ze=["src","alt"],Je=t("div",{class:"flex items-center justify-center"},[t("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),Xe={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},Ye=["onClick"],ts={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},es={key:0},ss=t("i",{class:"fa-regular fa-circle text-white"},null,-1),as=[ss],ns={key:1},os=["src","alt"],tt=q({__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(e,{emit:s}){const a=e,n=s,o=A(!1),r=A(a.selected),c=A(null),u=()=>{o.value=!0},i=()=>{o.value=!1},h=p=>{r.value=p,n("update:selected",p,a.label),o.value=!1},v=p=>`images/items/common/insight${p}.webp`;return ht(c,i),zt(()=>{a.selected===void 0?(r.value=a.options[0],n("update:selected",a.options[0],a.label)):(r.value=a.selected,n("update:selected",a.selected,a.label))}),(p,g)=>($(),I("div",ze,[t("button",{onClick:u,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(z,{key:0},[r.value===0?($(),I("div",Be,He)):($(),I("div",Ke,[t("img",{class:"avatar w-6",src:v(r.value),alt:"Option "+r.value},null,8,Ze)]))],64)):($(),I(z,{key:1},[dt(b(r.value),1)],64))]),o.value?($(),I("div",{key:0,ref_key:"containerRef",ref:c,class:"absolute mt-14 w-48 lg:w-64 z-50"},[Je,t("div",Xe,[($(!0),I(z,null,st(e.options,m=>($(),I("button",{key:m,class:"m-1",onClick:x=>h(m)},[t("div",ts,[e.label==="Current Insight"||e.label==="Goal Insight"?($(),I(z,{key:0},[m===0?($(),I("div",es,as)):($(),I("div",ns,[t("img",{src:v(m),alt:"Option "+m},null,8,os)]))],64)):($(),I(z,{key:1},[dt(b(m),1)],64))])],8,Ye))),128))])],512)):G("",!0)]))}}),ls={class:"mb-8 hidden-scrollbar custom-item-list"},is=q({__name:"ArcanistLevelUp",props:{arcanist:{type:Object,required:!0}},setup(e){const s=e,a=O(()=>{const n=s.arcanist;return St(n).map(o=>jt.includes(o.Material)?{Material:"Crystal Casket",Quantity:o.Quantity}:o)});return(n,o)=>($(),I("div",ls,[($(!0),I(z,null,st(a.value,r=>($(),T(Kt,{class:"py-2",key:r.Material,material:r},null,8,["material"]))),128))]))}}),rt=e=>(yt("data-v-0af7809b"),e=e(),bt(),e),rs={class:"edit-overlay"},cs={class:"fixed p-4 custom-modal-big custom-border rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},us=rt(()=>t("i",{class:"fas fa-times"},null,-1)),ds=[us],hs={class:"flex flex-wrap items-center p-2 mb-3 shadow-border-b"},vs={class:"flex items-center justify-center mr-2 space-x-3"},ps={class:"text-1xl md:text-2xl text-white font-bold"},ms={class:"text-sm text-white",for:"raritySelect"},fs={class:"ml-auto flex items-center space-x-3"},gs=["data-tip"],ys=["data-tip"],bs=rt(()=>t("div",{class:"custom-line"},null,-1)),_s={class:"custom-label text-blue-100"},$s={class:"mt-2 flex justify-center items-center leading-none"},xs=rt(()=>t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1)),ws={class:"custom-label text-blue-100"},ks={class:"mt-2 flex justify-center items-center leading-none"},Is=rt(()=>t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1)),Ms={class:"custom-label text-blue-100"},Cs={class:"mt-2 flex justify-center items-center leading-none"},As=rt(()=>t("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1)),Ss={class:"flex justify-center space-x-4 pt-2"},Ns=["data-tip"],Os=rt(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),Qs=[Os],Rs=["data-tip"],js={key:0,onclick:"level_up_container.showModal()",class:"btn btn-info"},Vs=rt(()=>t("i",{class:"fa-solid fa-arrow-up-from-bracket"},null,-1)),Ds=[Vs],Es={id:"level_up_container",class:"modal"},Us={class:"modal-box custom-gradient-gray-blue custom-border relative flex flex-col min-h-[calc(30dvh)] max-h-[calc(85dvh)] sm:max-h-[calc(75dvh)] gap-4"},Ws=rt(()=>t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost text-white absolute right-2 top-2"},"✕")],-1)),Ps={class:"flex items-center justify-center flex-col"},qs={class:"text-white text-xl font-bold"},Ls={class:"text-white text-center"},Fs={class:"overflow-y-auto shrink"},Gs={method:"dialog",class:"flex justify-center"},zs={key:1,class:"text-error"},Bs=rt(()=>t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1)),Ts=q({__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:["closeOverlay","updateSelectedArcanists","updateListArcanists"],setup(e,{emit:s}){const a=e,n=s,o=H().arcanists,r=A(0),c=de,u=A(o.find(M=>Number(M.Id)===Number(a.selectedArcanist.Id))||{}),i=A(a.selectedArcanists),h=A(a.listArcanists),v=A(a.selectedArcanist.currentInsight),p=A(a.selectedArcanist.currentLevel),g=A(a.selectedArcanist.currentResonance),m=A(a.selectedArcanist.goalInsight),x=A(a.selectedArcanist.goalLevel),_=A(a.selectedArcanist.goalResonance),C=A(a.selectedArcanist.isVisible),d=(M,S,U,et)=>Number(M)>Number(U)?!0:Number(M)<Number(U)?!1:Number(S)>Number(et),y=O(()=>i.value.findIndex(M=>Number(M.Id)===Number(D.value.Id))),f=()=>{const M=y.value;M!==-1?i.value[M]={...i.value[M],...D.value}:i.value.push(D.value),h.value=h.value.filter(S=>S.Id!==D.value.Id),n("updateSelectedArcanists",i.value),n("updateListArcanists",h.value),n("closeOverlay")},l=()=>{const M=i.value.findIndex(S=>Number(S.Id)===Number(D.value.Id));M!==-1&&i.value.splice(M,1),j()},k=O(()=>D.value?St(D.value):[]),w=O(()=>{var M;return((M=Q().data)==null?void 0:M.length)===0?!1:k.value.filter(S=>jt.includes(S.Material)?Q().getItemQuantity("Crystal Casket")<S.Quantity:Q().getItemQuantity(S.Material)<S.Quantity).length===0}),N=()=>{w.value&&(F().setIsEditingWarehouse(!0),k.value.forEach(M=>{jt.includes(M.Material)?Q().reduceItem("Crystal Casket",M.Quantity):Q().reduceItem(M.Material,M.Quantity)}),p.value=x.value,v.value=m.value,g.value=_.value,F().setIsEditingWarehouse(!1),f())},V=()=>{if(u.value.Rarity>=5){m.value=3,x.value=30,_.value=10;return}m.value=2,x.value=50,_.value=10},j=()=>{n("closeOverlay")},P=(M,S)=>{switch(S){case"Current Insight":v.value=M;break;case"Current Level":p.value=M;break;case"Current Resonance":g.value=M;break;case"Goal Insight":m.value=M;break;case"Goal Level":x.value=M;break;case"Goal Resonance":_.value=M;break;case"Visible":C.value=M;break}},D=O(()=>({Id:u.value.Id,isVisible:C.value,currentInsight:v.value,currentLevel:p.value,goalInsight:m.value,goalLevel:x.value,currentResonance:g.value,goalResonance:_.value})),L=O(()=>u.value.Rarity),at=O(()=>[0,...(u.value.Insight??[]).map(M=>M.Id)]),ct=O(()=>at.value.filter(M=>M>=v.value)),ot=O(()=>{const M=c.find(S=>S.Rarity.includes(u.value.Rarity)&&S.Insight===v.value);return M?[1,...Object.keys(M.Levels).map(Number).filter(S=>S%5===0)]:[]}),Y=O(()=>{if(m.value===null)return[];const M=c.find(S=>S.Rarity.includes(u.value.Rarity)&&S.Insight===m.value);return M?m.value===v.value?[1,...Object.keys(M.Levels).map(Number).filter(S=>S%5===0)].filter(S=>S>=p.value):[1,...Object.keys(M.Levels).map(Number).filter(S=>S%5===0)]:[]}),lt=O(()=>{if(v.value===null)return[];if(v.value===0)return g.value=0,[0];const M=Number(v.value);if(M===0)return g.value=0,[];const S=M*5;return Array.from({length:S},(U,et)=>Number(et+1))}),it=O(()=>{if(m.value===null)return[];if(m.value===0)return _.value=0,[0];const M=Number(m.value),S=Number(g.value);if(M===0)return _.value=0,[];const U=S||1,et=M*5;return Array.from({length:et-U+1},(ut,ft)=>Number(U+ft))});return gt([v,p,g,m,x,_],()=>{r.value+=1,p.value>ot.value[ot.value.length-1]&&(p.value=ot.value[ot.value.length-1]),x.value>Y.value[Y.value.length-1]&&(x.value=Y.value[Y.value.length-1]),Number(g.value)>Number(_.value)&&(_.value=g.value),g.value<lt.value[0]&&(g.value=lt.value[0]),_.value<it.value[0]&&(_.value=it.value[0]),d(v.value,p.value,m.value,x.value)&&(m.value=v.value,x.value=p.value)}),(M,S)=>($(),I("div",rs,[t("div",cs,[t("button",{onClick:j,class:"text-white absolute top-2 right-4"},ds),t("div",hs,[t("div",vs,[R(pe,{class:"ml-2",arcanist:u.value},null,8,["arcanist"]),t("h2",ps,b(M.$t(u.value.Name)),1),t("label",ms,[dt(b(L.value)+" ",1),t("i",{class:K(["fa-solid fa-star",{"text-orange-300":L.value===6,"text-yellow-100":L.value===5,"text-purple-400":L.value===4,"text-sky-200":L.value===3,"text-green-200":L.value===2}])},null,2)])]),t("div",fs,[t("div",{class:"tooltip","data-tip":M.$t("remove-arcanist")},[t("i",{onClick:l,class:"fas fa-trash-alt text-gray-500"})],8,gs),t("div",{class:"tooltip","data-tip":M.$t("hidden-show")},[t("div",{onClick:S[0]||(S[0]=U=>C.value=!C.value),class:K(["badge badge-ghost",C.value?"green-badge":"red-badge"])},[t("i",{class:K(C.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)],8,ys)])]),bs,t("div",_s,b(M.$t("current-level")),1),t("div",$s,[($(),T(tt,{key:r.value,modelValue:v.value,"onUpdate:modelValue":S[1]||(S[1]=U=>v.value=U),selected:v.value,label:"Current Insight",options:at.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"])),xs,($(),T(tt,{key:r.value,modelValue:p.value,"onUpdate:modelValue":S[2]||(S[2]=U=>p.value=U),selected:p.value,label:"Current Level",options:ot.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"]))]),t("div",ws,b(M.$t("goal-level")),1),t("div",ks,[($(),T(tt,{key:r.value,modelValue:m.value,"onUpdate:modelValue":S[3]||(S[3]=U=>m.value=U),selected:m.value,label:"Goal Insight",options:ct.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"])),Is,($(),T(tt,{key:r.value,modelValue:x.value,"onUpdate:modelValue":S[4]||(S[4]=U=>x.value=U),selected:x.value,label:"Goal Level",options:Y.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"]))]),t("div",Ms,b(M.$t("resonance")),1),t("div",Cs,[($(),T(tt,{key:r.value,modelValue:g.value,"onUpdate:modelValue":S[5]||(S[5]=U=>g.value=U),selected:g.value,label:"Current Resonance",options:lt.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"])),As,($(),T(tt,{key:r.value,modelValue:_.value,"onUpdate:modelValue":S[6]||(S[6]=U=>_.value=U),selected:_.value,label:"Goal Resonance",options:it.value,"onUpdate:selected":P},null,8,["modelValue","selected","options"]))]),t("div",Ss,[t("div",{class:"tooltip","data-tip":M.$t("quick-goal")},[t("button",{onClick:V,class:"btn btn-info"},Qs)],8,Ns),t("button",{onClick:f,class:"btn btn-success"},b(M.$t("save")),1),t("div",{class:"tooltip","data-tip":M.$t("level-up")},[y.value>=0&&k.value.length!=0?($(),I("button",js,Ds)):G("",!0)],8,Rs)]),t("dialog",Es,[t("div",Us,[Ws,t("div",Ps,[t("p",qs,b(M.$t("level-up")),1),t("p",Ls,b(M.$t("leveling-up-will-update-the-arcanists-current-status-and-consume-your-warehouse-inventory-proceed")),1)]),t("div",Fs,[R(is,{arcanist:D.value},null,8,["arcanist"])]),t("form",Gs,[w.value?($(),I("button",{key:0,class:"btn btn-sm btn-success text-black",onClick:N},b(M.$t("level-up")),1)):($(),I("p",zs,b(M.$t("not-enough-materials")),1))])]),Bs]),R(ue,{arcanist:D.value},null,8,["arcanist"])])]))}}),Hs=nt(Ts,[["__scopeId","data-v-0af7809b"]]),Ks={class:"list-overlay"},Zs={class:"custom-modal-small h-auto"},Js=t("i",{class:"fas fa-times"},null,-1),Xs=[Js],Ys={class:"text-white text-center text-lg font-bold"},ta={class:"text-info text-center pb-5"},ea={class:"font-bold"},sa={class:"grid grid-cols-1 space-y-3"},aa={class:"form-control"},na={class:"cursor-pointer label justify-center"},oa={class:"label-text text-white mr-3"},la=["checked"],ia=["data-tip"],ra={class:"form-control"},ca={class:"cursor-pointer label justify-center"},ua={class:"label-text text-white mr-3"},da=["checked"],ha=["data-tip"],va={class:"form-control"},pa={class:"cursor-pointer label justify-center"},ma={class:"label-text text-white mr-3"},fa=["checked"],ga={class:"flex items-center justify-center translate-x-4"},ya={class:"label-text text-white"},ba={class:"flex justify-center pt-3"},_a=q({__name:"PlannerActivity",props:{settings:{type:Object,required:!0}},emits:["closeOverlay","saveActivitySettings"],setup(e,{emit:s}){const a=e,n=s,o=[0,1,2,3,4,5,6,7,8],r=[0,60,90,120,120,150,150,200,200],c=A(a.settings.roaringMonth),u=A(a.settings.lazyModo),i=A(a.settings.weeklyActivity),h=A(a.settings.refills),v=_=>{h.value=_},p=()=>{const _={roaringMonth:c.value,lazyModo:u.value,weeklyActivity:i.value,refills:h.value,activity:m.value,cost:x.value};n("saveActivitySettings",_),g()},g=()=>{n("closeOverlay")},m=O(()=>{let _=u.value?190:240;return c.value&&(_+=60),_+=h.value*100,i.value&&(_+=Math.floor(240/7)),_}),x=O(()=>{let _=0;for(let C=0;C<=h.value;C++)_+=r[C];return _});return(_,C)=>($(),I("div",Ks,[t("div",Zs,[t("button",{onClick:g,class:"absolute top-2 right-4 text-white"},Xs),t("p",Ys,b(_.$t("activity-settings")),1),t("p",ta,[dt(b(_.$t("current-per-day"))+" ",1),t("span",ea,b(m.value),1)]),t("div",sa,[t("div",aa,[t("label",na,[t("span",oa,b(_.$t("roaring-month")),1),Z(t("input",{"onUpdate:modelValue":C[0]||(C[0]=d=>c.value=d),type:"checkbox",checked:c.value,class:"checkbox checkbox-info"},null,8,la),[[vt,c.value]])])]),t("div",{class:"tooltip","data-tip":_.$t("240-activities-per-week")},[t("div",ra,[t("label",ca,[t("span",ua,b(_.$t("weekly-activeness")),1),Z(t("input",{"onUpdate:modelValue":C[1]||(C[1]=d=>i.value=d),type:"checkbox",checked:i.value,class:"checkbox checkbox-info"},null,8,da),[[vt,i.value]])])])],8,ia),t("div",{class:"tooltip","data-tip":_.$t("login-once-per-day-for-base-190-activities")},[t("div",va,[t("label",pa,[t("span",ma,b(_.$t("lazy-modo")),1),Z(t("input",{"onUpdate:modelValue":C[2]||(C[2]=d=>u.value=d),type:"checkbox",checked:u.value,class:"checkbox checkbox-info"},null,8,fa),[[vt,u.value]])])])],8,ha),t("div",ga,[t("span",ya,b(_.$t("daily-refill")),1),R(tt,{class:"w-1/3",options:o,selected:h.value,label:"refills","onUpdate:selected":v},null,8,["selected"])])]),t("div",ba,[t("button",{onClick:p,class:"btn btn-success"},b(_.$t("save")),1)])])]))}}),$a=e=>(yt("data-v-2294778c"),e=e(),bt(),e),xa={class:"list-overlay"},wa={class:"custom-modal-small h-auto"},ka=$a(()=>t("i",{class:"fas fa-times"},null,-1)),Ia=[ka],Ma={class:"custom-label text-yellow-100"},Ca={class:"grid grid-cols-3"},Aa={class:"custom-label text-yellow-100"},Sa={class:"grid grid-cols-3"},Na={class:"custom-label text-yellow-100"},Oa={class:"grid grid-cols-2 p-2 items-center"},Qa=["placeholder"],Ra=["data-tip"],ja={class:"form-control"},Va={class:"cursor-pointer label justify-center"},Da={class:"label-text text-yellow-100 mr-3"},Ea=["checked"],Ua={class:"custom-label text-yellow-100"},Wa={class:"grid grid-cols-2 p-2"},Pa=["data-tip"],qa={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},La=["data-tip"],Fa={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},Ga={class:"text-yellow-100 text-sm text-center p-2"},za={class:"flex justify-center"},Ba=q({__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:["closeOverlay","saveWildernessSettings"],setup(e,{emit:s}){const a=e,n=s,o=A(a.settings.dust1),r=A(a.settings.dust2),c=A(a.settings.dust3),u=A(a.settings.gold1),i=A(a.settings.gold2),h=A(a.settings.gold3),v=A(a.settings.vigor),p=A(a.settings.lazyModo),g=[0,1,2,3,4,5,6],m=[0,120,150,175,210,240,270],x=[0,60,75,80,96,108,120],_=()=>{n("closeOverlay")},C=(l,k)=>{switch(k){case"Dust 1":o.value=l;break;case"Dust 2":r.value=l;break;case"Dust 3":c.value=l;break;case"Gold 1":u.value=l;break;case"Gold 2":i.value=l;break;case"Gold 3":h.value=l;break}},d=()=>{const l=parseInt(v.value,10);if(isNaN(l)){v.value=null;return}if(l<0){v.value=0;return}if(l>50){v.value=50;return}v.value=l},y=()=>{const l={dust1:o.value,dust2:r.value,dust3:c.value,gold1:u.value,gold2:i.value,gold3:h.value,vigor:v.value,lazyModo:p.value,wildernessOutput:f.value};n("saveWildernessSettings",l),_()},f=O(()=>{const l=m[o.value]+m[r.value]+m[c.value],k=x[u.value]+x[i.value]+x[h.value],w=v.value?parseFloat(v.value.toString())/100:0,N=p.value?20:24,V=Math.ceil(l*(1+w)*N),j=Math.ceil(k*(1+w)*N);return{dust:V,gold:j}});return(l,k)=>($(),I("div",xa,[t("div",wa,[t("button",{onClick:_,class:"absolute top-2 right-4 text-white"},Ia),t("div",Ma,b(l.$t("dust-bell-towers")),1),t("div",Ca,[R(tt,{class:"select-list",options:g,selected:o.value,label:"Dust 1","onUpdate:selected":C},null,8,["selected"]),R(tt,{class:"select-list",options:g,selected:r.value,label:"Dust 2","onUpdate:selected":C},null,8,["selected"]),R(tt,{class:"select-list",options:g,selected:c.value,label:"Dust 3","onUpdate:selected":C},null,8,["selected"])]),t("div",Aa,b(l.$t("sharpodonty-markets")),1),t("div",Sa,[R(tt,{class:"select-list",options:g,selected:u.value,label:"Gold 1","onUpdate:selected":C},null,8,["selected"]),R(tt,{class:"select-list",options:g,selected:i.value,label:"Gold 2","onUpdate:selected":C},null,8,["selected"]),R(tt,{class:"select-list",options:g,selected:h.value,label:"Gold 3","onUpdate:selected":C},null,8,["selected"])]),t("div",Na,b(l.$t("vigor-percent")),1),t("div",Oa,[Z(t("input",{onInput:d,"onUpdate:modelValue":k[0]||(k[0]=w=>v.value=w),type:"text",placeholder:l.$t("vigor"),class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,40,Qa),[[Ct,v.value]]),t("div",{class:"tooltip","data-tip":l.$t("collect-once-a-day")},[t("div",ja,[t("label",Va,[t("span",Da,b(l.$t("lazy-modo")),1),Z(t("input",{"onUpdate:modelValue":k[1]||(k[1]=w=>p.value=w),type:"checkbox",checked:p.value,class:"checkbox checkbox-info"},null,8,Ea),[[vt,p.value]])])])],8,Ra)]),t("div",Ua,b(l.$t("output")),1),t("div",Wa,[t("div",{class:"tooltip","data-tip":l.$t("Dust")},[t("label",qa,b(f.value.dust),1)],8,Pa),t("div",{class:"tooltip","data-tip":l.$t("Sharpodonty")},[t("label",Fa,b(f.value.gold),1)],8,La)]),t("p",Ga,b(l.$t("wilderness-output-will-be-considered-for-calculations")),1),t("div",za,[t("button",{onClick:y,class:"btn btn-success"},b(l.$t("save")),1)])])]))}}),Ta=nt(Ba,[["__scopeId","data-v-2294778c"]]),Ut={"Base Item":0,"Resonate Material":1,"Insight Material":2,"Build Material":2};function Ha(e){const s=H().shops;e in s?s[e].forEach(n=>{const{Material:o,Quantity:r}=n;Q().addItem(o,r)}):console.error(`Version ${e} not found in shops data.`)}function Ka(e){const s=H().shops;e in s?s[e].forEach(n=>{const{Material:o,Quantity:r}=n;Q().reduceItem(o,r)}):console.error(`Version ${e} not found in shops data.`)}const Za=()=>{const e=mt().settings.enabledUnreleasedStages;console.log("Initialize warehouse"),H().items.forEach(s=>{(s.IsReleased||e)&&(s.Category==="Build Material"||s.Category==="Insight Material"||s.Category==="Resonate Material"&&s.Rarity<6||s.Name==="Dust"||s.Name==="Sharpodonty"||s.Name==="Crystal Casket")&&Q().initItem(s.Name,s.Category)})},Ja=()=>{const e=mt().settings.enabledUnreleasedStages;H().items.forEach(s=>{!Q().hasItem(s.Name)&&(s.Name==="Crystal Casket"||!s.IsReleased&&e)?Q().initItem(s.Name,s.Category):!s.IsReleased&&!e&&Q().removeItem(s.Name)})},Xa=e=>{const s=H().items;e.sort((a,n)=>{const o=s.findIndex(i=>i.Name===a.Material),r=s.findIndex(i=>i.Name===n.Material),c=s[o],u=s[r];if(c&&u){const i=Ut[c.Category],h=Ut[u.Category];return i!==h?i-h:u.Rarity!==c.Rarity?u.Rarity-c.Rarity:o-r}else return r-o})},Ya={class:"pb-6"},tn={class:"relative inline-block"},en=["src"],sn=["src"],an=q({__name:"WarehouseItem",props:{material:{type:Object,required:!0}},emits:["update:quantity"],setup(e,{emit:s}){const a=e,n=s,o=A(a.material.Quantity),r=()=>{const u=Number(o.value);isNaN(u)||n("update:quantity",Number(o.value))},c=O(()=>Nt(a.material));return gt(()=>a.material,u=>{o.value=u.Quantity}),(u,i)=>($(),I("div",Ya,[t("div",tn,[t("img",{src:c.value.borderImagePath,alt:"Border Image",class:K(["w-20 h-20 absolute",{"w-36":c.value.material==="Sharpodonty"||c.value.material==="Dust"}])},null,10,en),t("img",{src:c.value.itemImagePath,alt:"Material Image",class:K(["w-20 h-20 avatar",{"mx-5":c.value.material==="Sharpodonty"||c.value.material==="Dust"}])},null,10,sn),Z(t("input",{"onUpdate:modelValue":i[0]||(i[0]=h=>o.value=h),onInput:r,type:"text",placeholder:"",class:K(["bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center",{"left-[17px] w-[85px]":c.value.material==="Sharpodonty"||c.value.material==="Dust"}])},null,34),[[Ct,o.value]])])]))}}),nn=["data-tip"],on={class:"modal-box custom-gradient-gray-blue custom-border"},ln=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),rn={class:"py-4 text-lg text-white text-center"},cn={class:"py-4 text-md text-white text-center"},un={class:"flex justify-center space-x-5"},dn=t("form",{method:"dialog",class:"modal-backdrop"},[t("button")],-1),xt=q({__name:"EventShopButton",props:{version:{},text:{},type:{}},emits:["closeOverlay"],setup(e,{emit:s}){const a=e,n=s,o=A(),r=()=>{Ha(a.version),n("closeOverlay"),i()},c=()=>{Ka(a.version),n("closeOverlay"),i()},u=()=>{var h;return(h=o.value)==null?void 0:h.showModal()},i=()=>{var h;return(h=o.value)==null?void 0:h.close()};return(h,v)=>($(),I(z,null,[t("div",{class:"tooltip","data-tip":h.type},[t("button",{class:"btn btn-info btn-sm",onClick:u},b(h.text),1)],8,nn),t("dialog",{ref_key:"dialog",ref:o,class:"modal"},[t("div",on,[ln,t("p",rn,b(h.$t("add-materials-from-text",[h.text])),1),t("p",cn,b(h.$t("you-should-add-once-only")),1),t("div",un,[t("button",{class:"btn btn-success btn-md mr-2",onClick:r},b(h.$t("add")),1),t("button",{class:"btn btn-error btn-md",onClick:c},b(h.$t("remove")),1)])]),dn],512)],64))}}),hn={class:"list-overlay"},vn={class:"custom-modal-big h-5/6 xl:h-3/4 flex flex-col items-center"},pn=t("i",{class:"fas fa-times"},null,-1),mn=[pn],fn={class:"text-white text-center font-bold text-lg"},gn={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},yn={class:"form-control items-center"},bn={class:"label cursor-pointer space-x-2"},_n={class:"label-text text-error text-xs font-bold"},$n={class:"form-control items-center"},xn={class:"label cursor-pointer space-x-2"},wn={class:"label-text text-info text-xs font-bold"},kn={class:"form-control items-center"},In={class:"label cursor-pointer space-x-2"},Mn={class:"label-text text-success text-xs font-bold"},Cn={class:"form-control items-center"},An={class:"label cursor-pointer space-x-2"},Sn={class:"label-text text-warning text-xs font-bold"},Nn={class:"custom-item-list mb-5"},On={class:"flex space-x-10"},Qn={class:"flex space-x-3"},Rn={class:"btn btn-sm btn-success",onclick:"shop_container.showModal()"},jn={id:"shop_container",class:"modal"},Vn={class:"modal-box custom-gradient-gray-blue custom-border"},Dn=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost text-white absolute right-2 top-2"},"✕")],-1),En={class:"py-4 text-base text-white text-center"},Un={class:"grid grid-cols-2 gap-2 p-2"},Wn={method:"dialog",class:"flex justify-center"},Pn={class:"btn btn-sm btn-success text-black"},qn=t("form",{method:"dialog",class:"modal-backdrop"},[t("button")],-1),Ln={class:"modal-box custom-gradient-gray-blue custom-border"},Fn={class:"py-4 text-lg text-white text-center"},Gn={class:"text-error"},zn={class:"py-4 text-md text-white text-center"},Bn={class:"flex justify-center"},Tn=t("form",{method:"dialog",class:"modal-backdrop"},[t("button")],-1),Hn=q({__name:"PlannerWarehouse",emits:["closeOverlay"],setup(e,{emit:s}){const a=s,n=A(),o=A({"Base Item":!0,"Build Material":!0,"Insight Material":!0,"Resonate Material":!0}),r=()=>{Q().data.length===0?Za():Ja(),Xa(Q().data)},c=(m,x)=>{Q().updateItem(m,Number(x))},u=m=>{o.value[m]=!o.value[m]},i=()=>{Object.values(o.value).every(m=>m)?Q().resetAll():Object.keys(o.value).forEach(m=>{o.value[m]&&Q().resetCategory(m)}),p()},h=()=>{F().setIsEditingWarehouse(!1),a("closeOverlay")},v=()=>{var m;return(m=n.value)==null?void 0:m.showModal()},p=()=>{var m;return(m=n.value)==null?void 0:m.close()},g=O(()=>Object.values(o.value).some(x=>x)?Q().data.filter(x=>o.value[x.Category]):Q().data);return zt(()=>{F().setIsEditingWarehouse(!0),r()}),(m,x)=>{const _=Mt("i18n-t");return $(),I("div",hn,[t("div",vn,[t("button",{onClick:h,class:"absolute top-2 right-4 text-white"},mn),t("p",fn,b(m.$t("warehouse-auto-save")),1),t("div",null,[t("div",gn,[t("div",yn,[t("label",bn,[t("span",_n,b(m.$t("base-item")),1),t("input",{type:"checkbox",checked:"",onChange:x[0]||(x[0]=C=>u("Base Item")),class:"checkbox checkbox-error"},null,32)])]),t("div",$n,[t("label",xn,[t("span",wn,b(m.$t("build-material")),1),t("input",{type:"checkbox",checked:"",onChange:x[1]||(x[1]=C=>u("Build Material")),class:"checkbox checkbox-info"},null,32)])]),t("div",kn,[t("label",In,[t("span",Mn,b(m.$t("insight-material")),1),t("input",{type:"checkbox",checked:"",onChange:x[2]||(x[2]=C=>u("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),t("div",Cn,[t("label",An,[t("span",Sn,b(m.$t("resonate-material")),1),t("input",{type:"checkbox",checked:"",onChange:x[3]||(x[3]=C=>u("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),t("div",Nn,[($(!0),I(z,null,st(g.value,C=>($(),T(an,{key:C.Material,material:C,"onUpdate:quantity":d=>c(C.Material,d),class:""},null,8,["material","onUpdate:quantity"]))),128))]),t("div",On,[t("div",Qn,[t("button",Rn,b(m.$t("event-materials")),1),t("dialog",jn,[t("div",Vn,[Dn,t("p",En,b(m.$t("you-can-quickly-add-materials-from-jukeboxes-and-events-here")),1),t("div",Un,[R(xt,{version:"jb1",text:m.$t("jukebox-normal"),type:m.$t("jukebox")},null,8,["text","type"]),R(xt,{version:"jb2",text:m.$t("jukebox-collector"),type:m.$t("jukebox")},null,8,["text","type"]),R(xt,{version:"1.31",text:m.$t("event-shop-button",{version:"1.3",number:"1"}),type:m.$t("event-shop")},null,8,["text","type"]),R(xt,{version:"1.32",text:m.$t("event-shop-button",{version:"1.3",number:"2"}),type:m.$t("event-shop")},null,8,["text","type"])]),t("form",Wn,[t("button",Pn,b(m.$t("close")),1)])]),qn])]),t("button",{class:"btn btn-error btn-sm",onClick:v},b(m.$t("reset")),1),t("dialog",{ref_key:"dialog",ref:n,class:"modal"},[t("div",Ln,[t("p",Fn,[R(_,{keypath:"reset-quantity-of-selected-categories"},{highlight:B(()=>[t("span",Gn,b(m.$t("selected")),1)]),_:1})]),t("p",zn,b(m.$t("click-the-buttons-at-the-top-to-select")),1),t("div",Bn,[t("button",{class:"btn btn-success btn-md mr-2",onClick:i},b(m.$t("yes")),1),t("button",{class:"btn btn-error btn-md",onClick:p},b(m.$t("no")),1)])]),Tn],512)])])])}}}),Kn={class:"list-overlay"},Zn={class:"custom-modal-small h-auto space-y-5"},Jn=t("i",{class:"fas fa-times"},null,-1),Xn=[Jn],Yn={class:"form-control"},to=["data-tip"],eo={class:"cursor-pointer label justify-center space-x-5 text-center"},so={class:"label-text text-white text-md"},ao={class:"form-control"},no={class:"cursor-pointer label justify-center space-x-5 text-center"},oo={class:"label-text text-white text-md"},lo={class:"flex justify-center"},io=q({__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:["closeOverlay","saveSettings"],setup(e,{emit:s}){const a=e,n=s,o=A(a.settings.enabledUnreleasedStages),r=A(a.settings.enableGreedyMethod),c=()=>{n("closeOverlay")},u=()=>{const i={showUnreleasedArcanists:a.settings.showUnreleasedArcanists,enabledUnreleasedStages:o.value,enableGreedyMethod:r.value};n("saveSettings",i),c()};return(i,h)=>($(),I("div",Kn,[t("div",Zn,[t("button",{onClick:c,class:"absolute top-2 right-4 text-white"},Xn),t("div",Yn,[t("div",{class:"tooltip","data-tip":i.$t("prioritize-purple-materials-when-farming")},[t("label",eo,[t("span",so,b(i.$t("enable-greedy-method")),1),Z(t("input",{"onUpdate:modelValue":h[0]||(h[0]=v=>r.value=v),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[vt,r.value]])])],8,to)]),t("div",ao,[t("label",no,[t("span",oo,b(i.$t("use-1-4-stage-data-experimental")),1),Z(t("input",{"onUpdate:modelValue":h[1]||(h[1]=v=>o.value=v),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[vt,o.value]])])]),t("div",lo,[t("button",{onClick:u,class:"btn btn-success"},b(i.$t("save")),1)])])]))}}),ro="/Kornblume/images/items/icon/51.webp",co="/Kornblume/images/items/icon/55.webp",uo="/Kornblume/images/items/icon/54.webp",$t=e=>(yt("data-v-e0b14315"),e=e(),bt(),e),ho={class:"flex flex-wrap custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},vo=$t(()=>t("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),po=["data-tip"],mo={class:"text"},fo=$t(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:ge,alt:"avatar"})])],-1)),go={class:"text pr-3"},yo=["data-tip"],bo={class:"text"},_o={key:1,class:"avatar"},$o=$t(()=>t("div",{class:"w-8 rounded"},[t("img",{src:ro,alt:"avatar"})],-1)),xo=[$o],wo=["data-tip"],ko={class:"text"},Io=$t(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:co,alt:"avatar"})])],-1)),Mo=["data-tip"],Co={class:"text"},Ao=$t(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:uo,alt:"avatar"})])],-1)),So=q({__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(e){const s=e,a=_t();return(n,o)=>{var r,c;return $(),I("div",ho,[vo,t("div",{class:"tooltip flex items-center","data-tip":n.$t("estimated-total-activities-and-days")},[t("div",mo,b((r=s.totalActivityAndDays)==null?void 0:r[0]),1),fo,t("div",go,b((c=s.totalActivityAndDays)==null?void 0:c[1])+" "+b(s.totalActivityAndDays[1]>1?n.$t("days"):n.$t("day")),1)],8,po),E(a).settings.cost>0?($(),I("div",{key:0,class:"tooltip","data-tip":n.$t("drops-cost")},[t("div",bo,b(Number(E(kt)(E(a).settings.cost))*s.totalActivityAndDays[1]),1)],8,yo)):G("",!0),E(a).settings.cost>0?($(),I("div",_o,xo)):G("",!0),t("div",{class:"tooltip tooltip-left","data-tip":n.$t("wilderness-production")},[t("div",ko,b(E(kt)(s.wildernessSettings.wildernessOutput.dust*s.totalActivityAndDays[1])),1)],8,wo),Io,t("div",{class:"tooltip tooltip-left","data-tip":n.$t("wilderness-production")},[t("div",Co,b(E(kt)(s.wildernessSettings.wildernessOutput.gold*s.totalActivityAndDays[1])),1)],8,Mo),Ao])}}}),No=nt(So,[["__scopeId","data-v-e0b14315"]]),X=(e,s,a)=>e.matrix[Math.imul(s,e.width)+a],J=(e,s,a,n)=>{e.matrix[Math.imul(s,e.width)+a]=n},Qt=e=>typeof e[Symbol.iterator]=="function"?e:Object.entries(e),Wt=e=>e===!0?!0:e===!1?new Set:e instanceof Set?e:new Set(e),Oo=e=>{const{direction:s,objective:a,integers:n,binaries:o}=e,r=s==="minimize"?-1:1,c=Qt(e.constraints),u=Qt(e.variables),i=Array.isArray(u)?u:Array.from(u),h=[],v=[];if(n!=null||o!=null){const l=Wt(o),k=l===!0?!0:Wt(n);for(let w=1;w<=i.length;w++){const[N]=i[w-1];l===!0||l.has(N)?(h.push(w),v.push(w)):(k===!0||k.has(N))&&v.push(w)}}const p=new Map;for(const[l,k]of c){const w=p.get(l)??{row:NaN,lower:-1/0,upper:1/0};w.lower=Math.max(w.lower,k.equal??k.min??-1/0),w.upper=Math.min(w.upper,k.equal??k.max??1/0),p.has(l)||p.set(l,w)}let g=1;for(const l of p.values())l.row=g,g+=(Number.isFinite(l.lower)?1:0)+(Number.isFinite(l.upper)?1:0);const m=i.length+1,x=g+h.length,_=m+x,C=new Float64Array(m*x),d=new Int32Array(_),y=new Int32Array(_),f={matrix:C,width:m,height:x,positionOfVariable:d,variableAtPosition:y};for(let l=0;l<_;l++)d[l]=l,y[l]=l;for(let l=1;l<m;l++)for(const[k,w]of Qt(i[l-1][1])){k===a&&J(f,0,l,r*w);const N=p.get(k);N!=null&&(Number.isFinite(N.upper)?(J(f,N.row,l,w),Number.isFinite(N.lower)&&J(f,N.row+1,l,-w)):Number.isFinite(N.lower)&&J(f,N.row,l,-w))}for(const l of p.values())Number.isFinite(l.upper)?(J(f,l.row,0,l.upper),Number.isFinite(l.lower)&&J(f,l.row+1,0,-l.lower)):Number.isFinite(l.lower)&&J(f,l.row,0,-l.lower);for(let l=0;l<h.length;l++){const k=g+l;J(f,k,0,1),J(f,k,h[l],1)}return{tableau:f,sign:r,variables:i,integers:v}},Zt=(e,s)=>{const a=Math.round(1/s);return Math.round((e+Number.EPSILON)*a)/a},Jt=(e,s,a)=>{const n=X(e,s,a),o=e.variableAtPosition[e.width+s],r=e.variableAtPosition[a];e.variableAtPosition[e.width+s]=r,e.variableAtPosition[a]=o,e.positionOfVariable[o]=a,e.positionOfVariable[r]=e.width+s;const c=[];for(let u=0;u<e.width;u++){const i=X(e,s,u);Math.abs(i)>1e-16?(J(e,s,u,i/n),c.push(u)):J(e,s,u,0)}J(e,s,a,1/n);for(let u=0;u<e.height;u++){if(u===s)continue;const i=X(e,u,a);if(Math.abs(i)>1e-16){for(let h=0;h<c.length;h++){const v=c[h];J(e,u,v,X(e,u,v)-i*X(e,s,v))}J(e,u,a,-i/n)}}},Xt=(e,s,a,n)=>{e.push([s.variableAtPosition[s.width+a],s.variableAtPosition[n]]);for(let o=6;o<=Math.trunc(e.length/2);o++){let r=!0;for(let c=0;c<o;c++){const u=e.length-1-c,[i,h]=e[u],[v,p]=e[u-o];if(i!==v||h!==p){r=!1;break}}if(r)return!0}return!1},Qo=(e,s)=>{const a=[],{precision:n,maxPivots:o,checkCycles:r}=s;for(let c=0;c<o;c++){let u=0,i=n;for(let p=1;p<e.width;p++){const g=X(e,0,p);g>i&&(i=g,u=p)}if(u===0)return["optimal",Zt(X(e,0,0),n)];let h=0,v=1/0;for(let p=1;p<e.height;p++){const g=X(e,p,u);if(g<=n)continue;const x=X(e,p,0)/g;if(x<v&&(h=p,v=x,x<=n))break}if(h===0)return["unbounded",u];if(r&&Xt(a,e,h,u))return["cycled",NaN];Jt(e,h,u)}return["cycled",NaN]},Yt=(e,s)=>{const a=[],{precision:n,maxPivots:o,checkCycles:r}=s;for(let c=0;c<o;c++){let u=0,i=-n;for(let p=1;p<e.height;p++){const g=X(e,p,0);g<i&&(i=g,u=p)}if(u===0)return Qo(e,s);let h=0,v=-1/0;for(let p=1;p<e.width;p++){const g=X(e,u,p);if(g<-n){const m=-X(e,0,p)/g;m>v&&(v=m,h=p)}}if(h===0)return["infeasible",NaN];if(r&&Xt(a,e,u,h))return["cycled",NaN];Jt(e,u,h)}return["cycled",NaN]};var te={exports:{}};(function(e,s){(function(){var a,n,o,r,c,u,i,h,v,p,g,m,x,_,C;o=Math.floor,p=Math.min,n=function(d,y){return d<y?-1:d>y?1:0},v=function(d,y,f,l,k){var w;if(f==null&&(f=0),k==null&&(k=n),f<0)throw new Error("lo must be non-negative");for(l==null&&(l=d.length);f<l;)w=o((f+l)/2),k(y,d[w])<0?l=w:f=w+1;return[].splice.apply(d,[f,f-f].concat(y)),y},u=function(d,y,f){return f==null&&(f=n),d.push(y),_(d,0,d.length-1,f)},c=function(d,y){var f,l;return y==null&&(y=n),f=d.pop(),d.length?(l=d[0],d[0]=f,C(d,0,y)):l=f,l},h=function(d,y,f){var l;return f==null&&(f=n),l=d[0],d[0]=y,C(d,0,f),l},i=function(d,y,f){var l;return f==null&&(f=n),d.length&&f(d[0],y)<0&&(l=[d[0],y],y=l[0],d[0]=l[1],C(d,0,f)),y},r=function(d,y){var f,l,k,w,N,V;for(y==null&&(y=n),w=(function(){V=[];for(var j=0,P=o(d.length/2);0<=P?j<P:j>P;0<=P?j++:j--)V.push(j);return V}).apply(this).reverse(),N=[],l=0,k=w.length;l<k;l++)f=w[l],N.push(C(d,f,y));return N},x=function(d,y,f){var l;if(f==null&&(f=n),l=d.indexOf(y),l!==-1)return _(d,0,l,f),C(d,l,f)},g=function(d,y,f){var l,k,w,N,V;if(f==null&&(f=n),k=d.slice(0,y),!k.length)return k;for(r(k,f),V=d.slice(y),w=0,N=V.length;w<N;w++)l=V[w],i(k,l,f);return k.sort(f).reverse()},m=function(d,y,f){var l,k,w,N,V,j,P,D,L;if(f==null&&(f=n),y*10<=d.length){if(w=d.slice(0,y).sort(f),!w.length)return w;for(k=w[w.length-1],P=d.slice(y),N=0,j=P.length;N<j;N++)l=P[N],f(l,k)<0&&(v(w,l,0,null,f),w.pop(),k=w[w.length-1]);return w}for(r(d,f),L=[],V=0,D=p(y,d.length);0<=D?V<D:V>D;0<=D?++V:--V)L.push(c(d,f));return L},_=function(d,y,f,l){var k,w,N;for(l==null&&(l=n),k=d[f];f>y;){if(N=f-1>>1,w=d[N],l(k,w)<0){d[f]=w,f=N;continue}break}return d[f]=k},C=function(d,y,f){var l,k,w,N,V;for(f==null&&(f=n),k=d.length,V=y,w=d[y],l=2*y+1;l<k;)N=l+1,N<k&&!(f(d[l],d[N])<0)&&(l=N),d[y]=d[l],y=l,l=2*y+1;return d[y]=w,_(d,V,y,f)},a=function(){d.push=u,d.pop=c,d.replace=h,d.pushpop=i,d.heapify=r,d.updateItem=x,d.nlargest=g,d.nsmallest=m;function d(y){this.cmp=y??n,this.nodes=[]}return d.prototype.push=function(y){return u(this.nodes,y,this.cmp)},d.prototype.pop=function(){return c(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},d.prototype.replace=function(y){return h(this.nodes,y,this.cmp)},d.prototype.pushpop=function(y){return i(this.nodes,y,this.cmp)},d.prototype.heapify=function(){return r(this.nodes,this.cmp)},d.prototype.updateItem=function(y){return x(this.nodes,y,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var y;return y=new d,y.nodes=this.nodes.slice(0),y},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,y){return e.exports=y()}(this,function(){return a})}).call(me)})(te);var Ro=te.exports,jo=Ro;const Vo=fe(jo),Pt=(e,s)=>({matrix:new Float64Array(e),positionOfVariable:new Int32Array(s),variableAtPosition:new Int32Array(s)}),Do=(e,{matrix:s,positionOfVariable:a,variableAtPosition:n},o)=>{const{width:r,height:c}=e;s.set(e.matrix);for(let i=0;i<o.length;i++){const[h,v,p]=o[i],g=(c+i)*r,m=e.positionOfVariable[v];if(m<r)s[g]=h*p,s.fill(0,g+1,g+r),s[g+m]=h;else{const x=(m-r)*r;s[g]=h*(p-s[x]);for(let _=1;_<r;_++)s[g+_]=-h*s[x+_]}}a.set(e.positionOfVariable),n.set(e.variableAtPosition);const u=r+c+o.length;for(let i=r+c;i<u;i++)a[i]=i,n[i]=i;return{matrix:s.subarray(0,e.matrix.length+r*o.length),width:r,height:c+o.length,positionOfVariable:a.subarray(0,u),variableAtPosition:n.subarray(0,u)}},qt=(e,s)=>{let a=0,n=0,o=0;for(let r=0;r<s.length;r++){const c=s[r],u=e.positionOfVariable[c]-e.width;if(u<0)continue;const i=X(e,u,0),h=Math.abs(i-Math.round(i));h>a&&(a=h,n=c,o=i)}return[n,o,a]},Eo=(e,s,a)=>{const{tableau:n,sign:o,integers:r}=e,{precision:c,maxIterations:u,tolerance:i,timeout:h}=a,[v,p,g]=qt(n,r);if(g<=c)return[e,"optimal",s];const m=new Vo((L,at)=>L[0]-at[0]);m.push([s,[[-1,v,Math.ceil(p)]]]),m.push([s,[[1,v,Math.floor(p)]]]);const x=r.length*2,_=n.matrix.length+x*n.width,C=n.positionOfVariable.length+x;let d=Pt(_,C),y=Pt(_,C);const f=s*(1-o*i),l=h+Date.now();let k=Date.now()>=l,w=!1,N=1/0,V=n,j=0;for(;j<u&&!m.empty()&&N>=f&&!k;){const[L,at]=m.pop();if(L>N)break;const ct=Do(n,d,at),[ot,Y]=Yt(ct,a);if(ot==="optimal"&&Y<N){const[lt,it,M]=qt(ct,r);if(M<=c){w=!0,N=Y,V=ct;const S=y;y=d,d=S}else{const S=[],U=[];for(let et=0;et<at.length;et++){const ut=at[et],[ft,Ot]=ut;Ot===lt?ft<0?U.push(ut):S.push(ut):(S.push(ut),U.push(ut))}U.push([1,lt,Math.floor(it)]),S.push([-1,lt,Math.ceil(it)]),m.push([Y,S]),m.push([Y,U])}}k=Date.now()>=l,j++}const D=(k||j>=u)&&!m.empty()&&N>=f?"timedout":w?"optimal":"infeasible";return[{...e,tableau:V},D,w?N:NaN]},Lt=({tableau:e,sign:s,variables:a},n,o,{precision:r,includeZeroVariables:c})=>{if(n==="optimal"||n==="timedout"&&!Number.isNaN(o)){const u=[];for(let i=0;i<a.length;i++){const[h]=a[i],v=e.positionOfVariable[i+1]-e.width,p=v>=0?X(e,v,0):0;p>r?u.push([h,Zt(p,r)]):c&&u.push([h,0])}return{status:n,result:-s*o,variables:u}}else if(n==="unbounded"){const u=e.variableAtPosition[o]-1;return{status:"unbounded",result:s*(1/0),variables:0<=u&&u<a.length?[[a[u][0],1/0]]:[]}}else return{status:n,result:NaN,variables:[]}},Uo={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},ee=(e,s)=>{const a=Oo(e),n={...Uo,...s},[o,r]=Yt(a.tableau,n);if(a.integers.length===0||o!=="optimal")return Lt(a,o,r,n);{const[c,u,i]=Eo(a,r,n);return Lt(c,u,i,n)}},se=H().formulas;function Rt(e){const s=_t().settings.activity;return Number((e/s).toFixed(1))}function Wo(e){const s=oe(),a=Q().data,n={},o={},r=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance","Crystal Casket"];e.forEach(({Material:x,Quantity:_})=>{r.includes(x)||(o[x]={min:_})});const c={},u=[];for(const{Name:x,Material:_,Quantity:C}of se){if(n[x]={min:0},_.length===0)continue;const d={};_.forEach((f,l)=>{d[f]=-C[l]});const y=`Wilderness Wishing Spring - ${x}`;c[y]={[x]:1,...d,cost:0},u.includes(y)||u.push(y)}const i={};for(const x in s){const _=s[x],{cost:C,drops:d,count:y}=_;i[x]={cost:C};for(const f in d)i[x][f]=y?d[f]/y:d[f]}const h={...n,...o};a.forEach(x=>{const{Material:_,Quantity:C}=x,d=C;d>0&&(h[_]?h[_]={min:h[_].min-d}:h[_]={min:-d})});const v=Object.assign({},c,i),m=ee({objective:"cost",direction:"minimize",constraints:h,variables:v,integers:u},{maxIterations:1048576,tolerance:.25});return m.status!=="optimal"&&(console.log(`%cStatus: ${m.status}`,"background-color: yellow; color: black;"),console.log("constraints: ",h),console.log("variables: ",v)),m}function Po(e){var N,V;let s=0;const a=e.find(j=>j.stage==="Wilderness Wishing Spring");a&&a.materials.forEach(({Material:j,Quantity:P})=>{const D=se.find(L=>L.Name===j);D!=null&&D.Quantity.length&&(s+=(D==null?void 0:D.Quantity[(D==null?void 0:D.Quantity.length)-1])*P)});const n=F().getNeededMaterialsQuantity("Sharpodonty")+s,o=F().getNeededMaterialsQuantity("Dust");let r=0;const c=e.filter(j=>j.stage!=="The Poussiere VI"&&j.stage!=="Mintage Aesthetics VI");c.forEach(j=>{j.stage!=="Oneiric Shop"&&(r+=j.activity)});const u=_t().settings.activity,i=Rt(r),h=((N=Q().data.find(j=>j.Material==="Sharpodonty"))==null?void 0:N.Quantity)||0,v=((V=Q().data.find(j=>j.Material==="Dust"))==null?void 0:V.Quantity)||0,p=Ht().settings.wildernessOutput,g=Math.max(n-p.gold*i-h,0),m=Math.max(o-p.dust*i-v,0),x={"The Poussiere VI":{Dust:12e3+Number((p.dust*25/u).toFixed(1)),Sharpodonty:250+Number((p.gold*25/u).toFixed(1)),Cost:25},"Mintage Aesthetics VI":{Dust:0+Number((p.dust*25/u).toFixed(1)),Sharpodonty:9e3+Number((p.gold*25/u).toFixed(1)),Cost:25}},d=ee({objective:"Cost",direction:"minimize",constraints:{Sharpodonty:{min:g},Dust:{min:m}},variables:x,integers:!0});let y=0,f=0;d.variables.forEach(([j,P])=>{j==="Mintage Aesthetics VI"?y=P:f=P});const l={stage:"Mintage Aesthetics VI",activityImagePath:"images/items/common/0.webp",runs:y,activity:25*y,days:Rt(25*y),materials:[{Material:"Sharpodonty",Quantity:9e3*y}]},k={stage:"The Poussiere VI",activityImagePath:"images/items/common/0.webp",runs:f,activity:25*f,days:Rt(25*f),materials:[{Material:"Dust",Quantity:12e3*f},{Material:"Sharpodonty",Quantity:250*f}]},w=[...c];return f>0&&w.push(k),y>0&&w.push(l),w}const Et=H().items,qo=H().formulas;function Lo(e){const s=Et.find(a=>a.Name===e.Material);if(s){const a=s.Rarity,n=e.Quantity;if(a===3)return n*40;if(a===4)return n*100;if(a===5)return n*250;if(a===6)return n*1500}return 0}function Fo(e,s){var o;if(e.Quantity<=0||((o=Et.find(r=>r.Name===e.Material))==null?void 0:o.Category)!=="Resonate Material")return;const n=ne("Oneiric Shop",s);n.materials.push(e),n.activity+=Lo(e)}function Go(e){const s=Q().data;return e.forEach(a=>{const n=s.find(o=>o.Category==="Resonate Material"&&o.Material===a.Material);n&&(a.Quantity-=n.Quantity)}),e}function zo(e,s){let a=0;if(e.forEach(n=>{const o=Et.find(r=>r.Name===n.Material);(o==null?void 0:o.Category)!=="Resonate Material"||(o==null?void 0:o.Rarity)!==6||(a+=n.Quantity,n.Quantity=0)}),a>0){const n={Material:"Crystal Casket",Quantity:a};e.unshift(n)}Go(e),e.forEach(n=>{Fo(n,s)})}function ae(e,s,a,n,o){return{stage:e,runs:s||0,activity:a||0,days:n||0,materials:o,activityImagePath:ve(e)}}function ne(e,s){let a=s.find(n=>n.stage===e);return a||(a=ae(e,null,e==="Oneiric Shop"?0:null,null,[]),s.push(a)),a}function Ft(e,s){return e.sort((a,n)=>{if(a.stage==="Oneiric Shop")return-1;if(n.stage==="Oneiric Shop")return 1;const o=s[a.stage],r=s[n.stage];return o&&r?o.id-r.id:o?-1:r?1:0})}function Bo(e){return e.sort((s,a)=>s.stage==="Unreleased"?1:a.stage==="Unreleased"?-1:a.runs-s.runs)}function To(e){const s={...F().neededRawMaterialsMapping};e.filter(([a])=>a.startsWith("Wilderness Wishing Spring")).forEach(([a,n])=>{const o=a.split("-")[1].trim(),r=qo.find(c=>c.Name===o);r!=null&&r.Material.length&&(r==null||r.Material.forEach((c,u)=>{const i=r==null?void 0:r.Quantity[u];s[c]?s[c]+=i*n:s[c]=i*n}))}),F().updateNeededMaterialsMapping(s)}function oe(){const{enableGreedyMethod:e,enabledUnreleasedStages:s}=mt().settings,a=H();return e?a[s?"stages1_4_greedy":"stages_greedy"]||{}:a[s?"stages1_4":"stages"]||{}}function Ho(e){const s=[],a=oe();zo(e,s);const n=Wo(e);To(n.variables),n.variables.forEach(v=>{const p=a[v[0]];if(p){const g=Math.ceil(v[1]),m=Math.ceil(g*p.cost),x=Number((m/_t().settings.activity).toFixed(1));let _=Object.entries(p.drops).map(([d,y])=>{const f=p==null?void 0:p.count;let l=f?y/f*g:y*g;return l=l%1>=.9?Math.ceil(l):Math.floor(l),{Material:d,Quantity:l}});_=_.filter(d=>d.Quantity>0);const C=ae(v[0],g,m,x,_);s.push(C)}else{const x={Material:v[0].split("-")[1].trim(),Quantity:v[1]};ne("Wilderness Wishing Spring",s).materials.push(x)}});const o=Po(s),r=o.filter(v=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(v.stage)&&v.materials.length>0),c=o.filter(v=>(v.stage.endsWith("II")||v.stage.endsWith("IV")||v.stage.endsWith("VI"))&&!r.some(p=>p.stage===v.stage)&&v.materials.length>0),u=o.filter(v=>!["Wilderness Wishing Spring",...r.map(p=>p.stage),...c.map(p=>p.stage)].includes(v.stage)&&v.materials.length>0),i=o.filter(v=>["Wilderness Wishing Spring"].includes(v.stage)&&v.materials.length>0);return[{id:0,cards:Ft(r,a)},{id:1,cards:Ft(c,a)},{id:2,cards:Bo(u)},{id:3,cards:i}]}function Ko(e){let s=0,a=0;return e.forEach(n=>{n.cards.forEach(o=>{o.days!==0&&(s+=o.activity,a+=parseFloat(o.days.toString()))})}),[s,a.toFixed(0)]}const Zo={class:"pb-4"},Jo={class:"relative flex flex-col"},Xo={class:"relative"},Yo=["src"],tl=["src"],el={class:"flex items-center justify-center font-bold w-20 mt-3"},sl=["disabled"],al=q({__name:"WarehouseItemEditor",props:{normalizedMaterial:{type:Object,required:!0},material:{type:Object,required:!0}},setup(e){var v;const s=e,a=Q(),{data:n}=At(a),o=O(()=>n.value.find(p=>p.Material===s.material.Material)),r=A(((v=o.value)==null?void 0:v.Quantity)||0),c=()=>{const p=Number(r.value);isNaN(p)||Q().updateItem(s.material.Material,p)},u=()=>{Q().reduceItem(s.material.Material,1)},i=()=>{Q().addItem(s.material.Material,1)},h=O(()=>r.value>0);return Vt(()=>{var p;r.value=((p=o.value)==null?void 0:p.Quantity)||0}),(p,g)=>($(),I("div",Zo,[t("div",Jo,[t("div",Xo,[t("img",{src:e.normalizedMaterial.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Yo),t("img",{src:e.normalizedMaterial.itemImagePath,alt:"Material Image",class:"w-20 h-20 avatar"},null,8,tl)]),Z(t("input",{"onUpdate:modelValue":g[0]||(g[0]=m=>r.value=m),onInput:c,type:"text",placeholder:"",class:"bg-slate-600 text-white w-14 input input-xs rounded-none text-center absolute right-3 bottom-6"},null,544),[[Ct,r.value]]),t("div",el,[t("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs w-7 text-base rounded-t-none rounded-r-none text-white",disabled:!h.value,onClick:u},"-",8,sl),t("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs w-7 text-base rounded-t-none rounded-l-none text-white",onClick:i},"+")])])]))}}),nl=nt(al,[["__scopeId","data-v-1f06709b"]]),ol={class:"relative inline-block"},ll=["src"],il=["src"],rl={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},cl=q({__name:"MaterialFormulaItem",props:{material:{type:Object,required:!0}},setup(e){const s=e,a=Q(),{data:n}=At(a),o=O(()=>Nt(s.material)),r=O(()=>{var c;return((c=n.value.find(u=>u.Material===s.material.Material))==null?void 0:c.Quantity)||0});return(c,u)=>($(),I("div",ol,[t("img",{src:o.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,ll),t("img",{src:o.value.itemImagePath,alt:"Material Image",class:"w-20 h-20 avatar"},null,8,il),t("div",rl,b(r.value>=1e3?o.value.quantity:`${r.value}/${o.value.quantity}`),1)]))}}),ul={class:"flex flex-col bg-slate-300/10 rounded py-2"},dl={class:"text-center text-white/95 text-sm opacity-80"},hl={class:"grid grid-cols-2 sm:flex flex-row m-auto"},vl={class:"flex px-3 items-center justify-center gap-3"},pl=["disabled"],ml=["disabled"],fl=q({__name:"MaterialCraftingRecipe",props:{normalizedMaterial:{type:Object,required:!0},material:{type:Object,required:!0},formula:{type:Object,required:!0}},setup(e){const s=e,a=Q(),{data:n}=At(a),o=()=>{if(s.formula){const i=s.formula;Q().addItem(i.Name,1),i.Material.forEach((h,v)=>{const p=i.Quantity[v]||0;Q().reduceItem(h,p)})}},r=()=>{if(s.formula){const i=s.formula;Q().reduceItem(i.Name,1),i.Material.forEach((h,v)=>{const p=i.Quantity[v]||0;Q().addItem(h,p)})}},c=O(()=>{var i,h;return(i=s.formula)!=null&&i.Material?!((h=s.formula)==null?void 0:h.Material.some((p,g)=>{var _,C;const m=((_=n.value.find(d=>d.Material===p))==null?void 0:_.Quantity)||0,x=(C=s.formula)==null?void 0:C.Quantity[g];return m<x})):!1}),u=O(()=>{var v;const i=s.material.Material;return(((v=n.value.find(p=>p.Material===i))==null?void 0:v.Quantity)||0)>0});return(i,h)=>{var v;return $(),I("div",ul,[t("p",dl,b(i.$t("crafting-recipe")),1),t("div",hl,[($(!0),I(z,null,st((v=e.formula)==null?void 0:v.Material,(p,g)=>{var m;return $(),I("div",{key:g},[R(cl,{material:{Material:p,Quantity:(m=e.formula)==null?void 0:m.Quantity[g]}},null,8,["material"])])}),128))]),t("div",vl,[t("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs font-bold text-white/95",onClick:o,disabled:!c.value},b(i.$t("craft")),9,pl),t("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs font-bold text-white/95",onClick:r,disabled:!u.value},b(i.$t("reverse")),9,ml)])])}}}),gl=nt(fl,[["__scopeId","data-v-91c7232e"]]),yl={class:"relative inline-block"},bl=["src"],_l=["src"],$l={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs cursor-default"},xl={class:"flex items-center justify-center flex-col"},wl={key:0,class:"text-center text-slate-300 text-sm opacity-80"},kl={class:"text-white"},Il={key:1,class:"text-center text-slate-300 text-sm opacity-80"},Ml={class:"text-white"},Cl={class:"text-center text-slate-300 text-sm opacity-80"},Al={class:"text-white"},Sl={key:2,class:"text-center text-slate-300 text-sm opacity-80"},Nl={class:"text-white"},Ol={class:"flex pt-2 justify-center items-center"},Ql=q({__name:"MaterialItem",props:{material:{type:Object,required:!0},layerId:{type:Number,required:!0}},setup(e){var f;const s=e,a=A(s.material.Quantity),n=H().items,o=Q(),{data:r}=At(o),c=O(()=>Nt(s.material)),u=O(()=>n.find(l=>l.Name===s.material.Material)),i=O(()=>r.value.find(l=>l.Material===s.material.Material)),h=O(()=>{if(s.material.Material==="Crystal Casket"){let k=0;return H().items.filter(w=>w.Category==="Resonate Material"&&w.Rarity===6).forEach(w=>{k+=F().getNeededRawMaterialsQuantity(w.Name)}),k}return F().getNeededRawMaterialsQuantity(c.value.material)}),v=O(()=>s.material.Material==="Crystal Casket"?h.value:F().getNeededMaterialsQuantity(c.value.material)),p=O(()=>Math.max(v.value-h.value,0)),g=O(()=>{var l;return(((l=i.value)==null?void 0:l.Quantity)||0)>=v.value}),m=O(()=>H().formulas.find(l=>l.Name===s.material.Material));gt(()=>s.material,l=>{a.value=l.Quantity});const x=A(i.value?(f=i.value)==null?void 0:f.Quantity:0),_=A(0);gt(i,l=>{if(F().isEditingMaterial===s.material.Material){const k=l?l.Quantity:0;_.value=k-x.value}});const C=()=>{var l;x.value=i.value?(l=i.value)==null?void 0:l.Quantity:0,_.value=0,F().setIsEditingWarehouse(!0),F().setIsEditingMaterial(s.material.Material)},d=()=>{var l;F().setIsEditingWarehouse(!1),F().setIsEditingMaterial(),x.value=i.value?(l=i.value)==null?void 0:l.Quantity:0,_.value=0},y=O(()=>{var l,k;return((l=u.value)==null?void 0:l.Category)==="Build Material"&&((k=u.value)==null?void 0:k.Rarity)<6});return(l,k)=>{const w=Mt("i18n-t");return $(),T(E(ie),{arrow:"",placement:"top",offsetDistance:"2","onOpen:popper":C,"onClose:popper":d},{content:B(()=>{var N;return[t("div",xl,[s.layerId===1||s.layerId===2?($(),I("p",wl,[R(w,{keypath:"numbers-expected-to-drop"},{numbers:B(()=>[t("span",kl,b(s.material.Quantity),1)]),_:1})])):G("",!0),s.layerId===3?($(),I("p",Il,[R(w,{keypath:"numbers-expected-to-be-crafted"},{numbers:B(()=>[t("span",Ml,b(Math.max(s.material.Quantity-_.value,0)),1)]),_:1})])):G("",!0),t("p",Cl,[R(w,{keypath:"numbers-needed-to-complete-the-goal"},{numbers:B(()=>[t("span",Al,b(v.value),1)]),_:1})]),(y.value||s.material.Material==="Sharpodonty")&&p.value>0?($(),I("p",Sl,[R(w,{keypath:"with-numbers-used-in-crafting"},{numbers:B(()=>[t("span",Nl,b(p.value),1)]),_:1})])):G("",!0),t("div",Ol,[R(nl,{material:e.material,normalizedMaterial:c.value},null,8,["material","normalizedMaterial"]),(N=m.value)!=null&&N.Material.length?($(),T(gl,{key:0,material:e.material,normalizedMaterial:c.value,formula:m.value},null,8,["material","normalizedMaterial","formula"])):G("",!0)])])]}),default:B(()=>[t("div",{class:K(["cursor-pointer",g.value?"opacity-40":""])},[t("div",yl,[t("img",{src:c.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,bl),t("img",{src:c.value.itemImagePath,alt:"Material Image",class:"w-20 h-20 avatar"},null,8,_l),t("div",$l,b(c.value.quantity),1)])],2)]),_:1})}}}),Gt=nt(Ql,[["__scopeId","data-v-54334b39"]]),Rl=e=>(yt("data-v-e9175c7f"),e=e(),bt(),e),jl={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},Vl={class:"stage text-white p-2"},Dl=["data-tip"],El={class:"calculations flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},Ul={key:0,class:"border-blue-700/90 border-r pr-3"},Wl=Rl(()=>t("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),Pl={key:1},ql={key:2,class:"pl-2"},Ll={key:3},Fl={class:"border-blue-700/90 border-r pr-3"},Gl={class:"pl-3"},zl=["src"],Bl={class:"border-blue-700/90 border-l pl-3"},Tl=q({__name:"PlannerCard",props:{card:{type:Object,required:!0},layerId:{type:Number,required:!0}},setup(e){const s=e,{t:a}=Dt(),n=A(null),o=O(()=>s.card.materials.length<4),r=O(()=>{if(!(s.layerId===3||s.card.stage==="Unreleased"))return s.card.stage==="Oneiric Shop"?a("number-of-oneiric-fluid"):a("number-of-runs")+" | "+a("activities")+" | "+a("uppercase-days")});return gt(o,c=>{c&&n.value&&(n.value.scrollLeft=0)}),(c,u)=>($(),I("div",jl,[t("div",Vl,[t("p",null,b(c.$t(e.card.stage)),1)]),t("div",{class:"tooltip w-full","data-tip":r.value},[t("div",El,[e.card.stage!=="Unreleased"?($(),I("p",Ul,[Z(t("span",null,[Wl,dt(b(e.card.runs),1)],512),[[wt,e.card.runs>0]])])):($(),I("p",Pl,b(c.$t("available-after-1-4-version-update")),1)),e.card.activity!==0?($(),I("p",ql,b(e.card.activity),1)):e.layerId===3?($(),I("p",Ll,[t("span",Fl,b(c.$t("crafted-from-available-materials")),1),t("span",Gl,b(c.$t("list-includes-dependencies")),1)])):G("",!0),Z(t("img",{src:e.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,zl),[[wt,e.card.activity]]),t("p",Bl,[Z(t("span",null,b(e.card.days)+" "+b(e.card.days===0?"":e.card.days>1?c.$t("days"):c.$t("day")),513),[[wt,e.card.days>0]])])])],8,Dl),e.card.stage==="Unreleased"?($(),I("div",{key:0,ref_key:"scrollDiv",ref:n,class:K([{"hidden-scrollbar":o.value},"flex overflow-y-hidden overflow-x-auto m-auto"])},[($(!0),I(z,null,st(e.card.materials.filter(i=>E(F)().neededRawMaterialsMapping[i.Material]>0),(i,h)=>($(),I("div",{key:h,class:"flex-shrink-0"},[R(Gt,{material:{...i,Quantity:0},layerId:e.layerId},null,8,["material","layerId"])]))),128))],2)):($(),I("div",{key:1,ref_key:"scrollDiv",ref:n,class:K([{"hidden-scrollbar":o.value},"flex overflow-y-hidden overflow-x-auto m-auto scrollbar"])},[($(!0),I(z,null,st(e.card.materials,(i,h)=>($(),I("div",{key:h,class:"flex-shrink-0"},[R(Gt,{material:i,layerId:e.layerId},null,8,["material","layerId"])]))),128))],2))]))}}),Hl=nt(Tl,[["__scopeId","data-v-e9175c7f"]]),Kl={class:"w-full mb-4 flex flex-col"},Zl=q({__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(e){const s=e,{t:a}=Dt(),n=O(()=>s.layer.cards&&s.layer.cards.length>0),o=O(()=>{switch(s.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),r=O(()=>{switch(s.layer.id){case 0:return a("resources");case 1:return a("insight");case 2:return a("hard-stages");case 3:return a("crafting");default:return"Undefined"}}),c=O(()=>{switch(s.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(u,i)=>($(),I("div",Kl,[n.value?($(),I("div",{key:0,class:K(["badge badge-lg badge-ghost mt-2 mb-2 w-32",o.value])},b(r.value),3)):G("",!0),t("div",{class:K(c.value)},[($(!0),I(z,null,st(e.layer.cards,(h,v)=>($(),T(Hl,{key:v,card:h,layerId:s.layer.id},null,8,["card","layerId"]))),128))],2)]))}}),Jl={class:"flex flex-wrap"},Xl={class:"text-center text-info font-bold text-sm hover:text-blue-200 opacity-90",onclick:"process_explaination.showModal()"},Yl={id:"process_explaination",class:"modal"},ti={class:"modal-box custom-gradient-gray-blue border border-blue-800"},ei=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),si={class:"py-4 text-white"},ai=t("br",null,null,-1),ni=t("br",null,null,-1),oi={class:"text-yellow-500"},li={class:"text-blue-500"},ii=t("br",null,null,-1),ri=t("br",null,null,-1),ci={class:"text-purple-500"},ui={class:"text-green-500"},di=t("br",null,null,-1),hi=t("br",null,null,-1),vi=t("br",null,null,-1),pi=t("br",null,null,-1),mi={class:"text-red-500"},fi={class:"text-purple-500"},gi={class:"text-red-500"},yi=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"Close")],-1),bi=q({__name:"PlannerResult",emits:["update:totalActivityAndDays"],setup(e,{emit:s}){const a=s,n=A([]);return Vt(()=>{if(!F().isEditingWarehouse){const o=Tt().selectedArcanists.map(u=>u.isVisible?St(u):[]),r=Bt(o),c=Ho(r);a("update:totalActivityAndDays",Ko(c)),n.value=c}}),(o,r)=>{const c=Mt("i18n-t");return $(),I("div",Jl,[t("button",Xl,b(o.$t("planner-calculation-explanation")),1),t("dialog",Yl,[t("div",ti,[ei,t("div",null,[t("p",si,[dt(b(o.$t("when-you-add-arcanists-to-the-planner-with-their-current-goal-levels-and-resonance-you-will-see-several-sections-appear-below"))+" ",1),ai,ni,R(c,{keypath:"the-resources-and-insight-sections-are-straightforward-and-they-show-you-how-many-times-you-need-to-run-each-stage-in-order-to-get-the-materials-based-on-your-intended-arcanist-levels-since-we-cant-farm-resonance-materials-those-are-shown-with-the-cost-associated-in-the-oneiric-shop-found-in-the-bank"},{resources:B(()=>[t("span",oi,b(o.$t("resources")),1)]),insight:B(()=>[t("span",li,b(o.$t("insight")),1)]),_:1}),ii,ri,R(c,{keypath:"the-other-two-sections-are-hard-stages-and-crafting-these-results-have-been-optimized-to-reduce-the-stamina-required-for-farming-these-materials-by-running-the-listed-stages-the-number-of-times-it-suggests-it-is-expected-you-will-receive-all-the-materials-you-need-the-materials-obtained-from-the-hard-stage-farming-will-help-you-make-the-items-listed-in-the-crafting-section"},{hardstages:B(()=>[t("span",ci,b(o.$t("hard-stages")),1)]),crafting:B(()=>[t("span",ui,b(o.$t("crafting")),1)]),_:1}),di,hi,dt(" "+b(o.$t("as-you-obtain-materials-from-farming-hard-stages-its-recommended-that-you-update-your-warehouse-values-so-that-the-planner-remains-up-to-date-and-your-results-are-accurate"))+" ",1),vi,pi,R(c,{keypath:"please-note-that-we-do-not-know-exact-drop-rates-so-we-can-only-show-what-youre-expected-to-get-not-what-you-will-get-exactly-the-hard-stages-section-will-also-show-any-drop-that-you-may-get-rather-than-only-the-items-that-you-need-this-does-not-affect-the-results-of-the-farm-plan"},{expected:B(()=>[t("span",mi,b(o.$t("expected")),1)]),hardstages:B(()=>[t("span",fi,b(o.$t("hard-stages")),1)]),any:B(()=>[t("span",gi,b(o.$t("any")),1)]),_:1})])])]),yi]),($(!0),I(z,null,st(n.value,(u,i)=>($(),T(Zl,{key:i,layer:u},null,8,["layer"]))),128))])}}}),_i={class:"list-overlay"},$i={class:"custom-modal-small h-5/6 lg:h-3/4"},xi={class:"relative"},wi=["placeholder"],ki=t("i",{class:"fas fa-times"},null,-1),Ii=[ki],Mi={class:"form-control"},Ci={class:"cursor-pointer label justify-center space-x-5"},Ai={class:"label-text text-white text-md"},Si={class:"p-2 overflow-y-auto h-5/6"},Ni=["onClick"],Oi={class:"text-white ml-8"},Qi=q({__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:["closeOverlay","selectArcanist"],setup(e,{emit:s}){const a=e,n=s,{locale:o,t:r}=Dt(),c=A(""),u=v=>{n("selectArcanist",v),i()},i=()=>{n("closeOverlay")},h=O(()=>o.value==="en-US"?a.arcanists.filter(v=>v.Name.toLowerCase().includes(c.value.toLowerCase())):a.arcanists.filter(v=>r(v.Name).includes(c.value)));return(v,p)=>($(),I("div",_i,[t("div",$i,[t("div",xi,[Z(t("input",{"onUpdate:modelValue":p[0]||(p[0]=g=>c.value=g),type:"text",placeholder:v.$t("search-arcanists"),class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,8,wi),[[Ct,c.value]]),t("button",{onClick:i,class:"absolute top-2 right-0 text-white"},Ii),t("div",Mi,[t("label",Ci,[t("span",Ai,b(v.$t("show-unreleased-arcanists")),1),Z(t("input",{"onUpdate:modelValue":p[1]||(p[1]=g=>E(mt)().settings.showUnreleasedArcanists=g),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[vt,E(mt)().settings.showUnreleasedArcanists]])])])]),t("div",Si,[($(!0),I(z,null,st(h.value,g=>($(),I("div",{key:g.Id,onClick:m=>u(g),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[R(ye,{arcanist:g},null,8,["arcanist"]),t("span",Oi,b(v.$t(g.Name)),1)],8,Ni))),128))])])]))}}),pt=e=>(yt("data-v-59a95344"),e=e(),bt(),e),Ri={class:"responsive-spacer"},ji={class:"flex pb-4"},Vi={class:"text-2xl text-white font-bold"},Di={class:"flex flex-wrap justify-between items-center mb-2 mt-2 gap-y-3"},Ei=pt(()=>t("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)),Ui={class:"flex space-x-2"},Wi=["data-tip"],Pi=pt(()=>t("i",{class:"fa-solid fa-bolt"},null,-1)),qi=[Pi],Li=["data-tip"],Fi=pt(()=>t("i",{class:"fa-solid fa-tree"},null,-1)),Gi=[Fi],zi=["data-tip"],Bi=pt(()=>t("i",{class:"fa-solid fa-box-archive"},null,-1)),Ti=[Bi],Hi=["data-tip"],Ki=pt(()=>t("i",{class:"fa-solid fa-gear"},null,-1)),Zi=[Ki],Ji=pt(()=>t("div",{class:"custom-line"},null,-1)),Xi=pt(()=>t("div",{class:"custom-line"},null,-1)),Yi={key:0,class:"overlay"},tr={key:1,class:"overlay"},er={key:2,class:"overlay"},sr={key:3,class:"overlay"},ar={key:4,class:"overlay"},nr={key:5,class:"overlay"},or=q({__name:"PlannerView",setup(e){const s=Tt(),a=_t(),n=Ht(),o=H().arcanists,r=mt(),c=A([]),u=O(()=>s.selectedArcanists.map(W=>W.Id)),i=A(null),h=A([]),v=A(!1),p=A(!1),g=A(!1),m=A(!1),x=A(!1),_=A(!1),C=A(null),d=A(null),y=A(null),f=A(null),l=A(null),k=A(null),w=()=>{v.value=!0},N=()=>{v.value=!1},V=()=>{p.value=!0},j=W=>{i.value=W,V()},P=()=>{p.value=!1},D=()=>{g.value=!0},L=()=>{g.value=!1},at=()=>{m.value=!0},ct=()=>{m.value=!1},ot=()=>{x.value=!0},Y=()=>{x.value=!1,F().setIsEditingWarehouse(!1)},lt=()=>{_.value=!0},it=()=>{_.value=!1},M=W=>{i.value={Id:W.Id,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},V()},S=W=>{s.selectedArcanists=W,P()},U=W=>{c.value=W},et=W=>{h.value=W},ut=W=>{a.settings=W},ft=W=>{n.settings=W},Ot=W=>{r.settings=W};return Vt(()=>{c.value=o.filter(W=>!u.value.includes(W.Id)),c.value=re(c.value)}),ht(C,L),ht(d,N),ht(y,P),ht(f,ct),ht(l,Y),ht(k,it),(W,lr)=>($(),I("div",Ri,[t("div",ji,[t("h2",Vi,b(W.$t("planner")),1)]),R(Ge,{selectedArcanists:E(s).selectedArcanists,onOpenEditOverlay:j},null,8,["selectedArcanists"]),t("div",Di,[t("button",{onClick:w,class:"btn btn-ghost btn-sm custom-gradient-button"},[Ei,dt(" "+b(W.$t("add-arcanist")),1)]),t("div",Ui,[t("div",{class:"tooltip","data-tip":W.$t("activity-settings")},[t("button",{onClick:D,class:"btn btn-ghost btn-sm custom-gradient-button"},qi)],8,Wi),t("div",{class:"tooltip","data-tip":W.$t("wilderness-settings")},[t("button",{onClick:at,class:"btn btn-ghost btn-sm custom-gradient-button"},Gi)],8,Li),t("div",{class:"tooltip","data-tip":W.$t("manage-warehouse")},[t("button",{onClick:ot,class:"btn btn-ghost btn-sm custom-gradient-button"},Ti)],8,zi),t("div",{class:"tooltip tooltip-left","data-tip":W.$t("settings")},[t("button",{onClick:lt,class:"btn btn-ghost btn-sm custom-gradient-button"},Zi)],8,Hi)])]),Ji,R(No,{totalActivityAndDays:h.value,wildernessSettings:E(n).settings},null,8,["totalActivityAndDays","wildernessSettings"]),Xi,v.value?($(),I("div",Yi,[R(Qi,{ref_key:"arcanistListRef",ref:d,arcanists:c.value,onCloseOverlay:N,onSelectArcanist:M},null,8,["arcanists"])])):G("",!0),p.value?($(),I("div",tr,[i.value?($(),T(Hs,{key:0,ref_key:"plannerEditRef",ref:y,selectedArcanist:i.value,selectedArcanists:E(s).selectedArcanists,listArcanists:c.value,onCloseOverlay:P,onUpdateSelectedArcanists:S,onUpdateListArcanists:U},null,8,["selectedArcanist","selectedArcanists","listArcanists"])):G("",!0)])):G("",!0),g.value?($(),I("div",er,[R(_a,{ref_key:"activityRef",ref:C,settings:E(a).settings,onCloseOverlay:L,onSaveActivitySettings:ut},null,8,["settings"])])):G("",!0),m.value?($(),I("div",sr,[R(Ta,{ref_key:"wildernessRef",ref:f,settings:E(n).settings,onCloseOverlay:ct,onSaveWildernessSettings:ft},null,8,["settings"])])):G("",!0),x.value?($(),I("div",ar,[R(Hn,{ref_key:"warehouseRef",ref:l,onCloseOverlay:Y},null,512)])):G("",!0),_.value?($(),I("div",nr,[R(io,{ref_key:"settingsRef",ref:k,settings:E(r).settings,onCloseOverlay:it,onSaveSettings:Ot},null,8,["settings"])])):G("",!0),R(bi,{"onUpdate:totalActivityAndDays":et})]))}}),fr=nt(or,[["__scopeId","data-v-59a95344"]]);export{fr as default};
